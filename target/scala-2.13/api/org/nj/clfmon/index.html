<!DOCTYPE html ><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/><title></title><meta content="" name="description"/><meta content="" name="keywords"/><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link href="../../../lib/index.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../lib/template.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../lib/print.css" media="print" type="text/css" rel="stylesheet"/><link href="../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css"/><script type="text/javascript" src="../../../lib/jquery.min.js"></script><script type="text/javascript" src="../../../lib/index.js"></script><script type="text/javascript" src="../../../index.js"></script><script type="text/javascript" src="../../../lib/scheduler.js"></script><script type="text/javascript" src="../../../lib/template.js"></script><script type="text/javascript">/* this variable can be used by the JS to determine the path to the root document */
var toRoot = '../../../';</script></head><body><div id="search"><span id="doc-title"><span id="doc-version"></span></span> <span class="close-results"><span class="left">&lt;</span> Back</span><div id="textfilter"><span class="input"><input autocapitalize="none" placeholder="Search" id="index-input" type="text" accesskey="/"/><i class="clear material-icons"></i><i id="search-icon" class="material-icons"></i></span></div></div><div id="search-results"><div id="search-progress"><div id="progress-fill"></div></div><div id="results-content"><div id="entity-results"></div><div id="member-results"></div></div></div><div id="content-scroll-container" style="-webkit-overflow-scrolling: touch;"><div id="content-container" style="-webkit-overflow-scrolling: touch;"><div id="subpackage-spacer"><div id="packages"><h1>Packages</h1><ul><li class="indented0 " name="_root_.root" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="_root_"></a><a id="root:_root_"></a> <span class="permalink"><a href="../../../index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../index.html" title=""><span class="name">root</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented1 " name="_root_.org" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="org"></a><a id="org:org"></a> <span class="permalink"><a href="../../../org/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../index.html" title=""><span class="name">org</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented2 " name="org.nj" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="nj"></a><a id="nj:nj"></a> <span class="permalink"><a href="../../../org/nj/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../index.html" title=""><span class="name">nj</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../index.html" name="org" id="org" class="extype">org</a></dd></dl></div></li><li class="indented3 current" name="org.nj.clfmon" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="clfmon"></a><a id="clfmon:clfmon"></a> <span class="permalink"><a href="../../../org/nj/clfmon/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">clfmon</span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="org.nj" id="org.nj" class="extype">nj</a></dd></dl></div></li><li class="current-entities indented3"><span class="separator"></span> <a href="CLF$.html" title="Common log format object." class="object"></a><a href="CLF$.html" title="Common log format object.">CLF</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="FileClf$.html" title="A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:" class="object"></a><a href="FileClf$.html" title="A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:">FileClf</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="Flows$.html" title="A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:" class="object"></a><a href="Flows$.html" title="A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:">Flows</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="LogEntry.html" title="LogEntry object." class="class"></a><a href="LogEntry.html" title="LogEntry object.">LogEntry</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="LogWindowedHost.html" title="LogWindowedHost object." class="class"></a><a href="LogWindowedHost.html" title="LogWindowedHost object.">LogWindowedHost</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="LogWindowedReq.html" title="LogWindowedReq object." class="class"></a><a href="LogWindowedReq.html" title="LogWindowedReq object.">LogWindowedReq</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="LogWindowedReqAlrm.html" title="LogWindowedReqAlrm object." class="class"></a><a href="LogWindowedReqAlrm.html" title="LogWindowedReqAlrm object.">LogWindowedReqAlrm</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="Main$.html" title="Main driver of application." class="object"></a><a href="Main$.html" title="Main driver of application.">Main</a></li></ul></div></div><div id="content"><body class="package value"><div id="definition"><div class="big-circle package">p</div><p id="owner"><a href="../../index.html" name="org" id="org" class="extype">org</a>.<a href="../index.html" name="org.nj" id="org.nj" class="extype">nj</a></p><h1>clfmon<span class="permalink"><a href="../../../org/nj/clfmon/index.html" title="Permalink"><i class="material-icons"></i></a></span></h1></div><h4 id="signature" class="signature"><span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">clfmon</span></span></h4><div id="comment" class="fullcommenttop"></div><div id="mbrsel"><div class="toggle"></div><div id="memberfilter"><i class="material-icons arrow"></i><span class="input"><input placeholder="Filter all members" id="mbrsel-input" type="text" accesskey="/"/></span><i class="clear material-icons"></i></div><div id="filterby"><div id="order"><span class="filtertype">Ordering</span><ol><li class="alpha in"><span>Alphabetic</span></li></ol></div><div id="visbl"><span class="filtertype">Visibility</span><ol><li class="public in"><span>Public</span></li><li class="protected out"><span>Protected</span></li></ol></div></div></div><div id="template"><div id="allMembers"><div id="types" class="types members"><h3>Type Members</h3><ol><li class="indented0 " name="org.nj.clfmon.LogEntry" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="LogEntryextendsProductwithSerializable"></a><a id="LogEntry:LogEntry"></a> <span class="permalink"><a href="../../../org/nj/clfmon/LogEntry.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">case class</span></span> <span class="symbol"><a href="LogEntry.html" title="LogEntry object."><span class="name">LogEntry</span></a><span class="params">(<span name="host">host: <span name="scala.Predef.String" class="extype">String</span></span>, <span name="ignore">ignore: <span name="scala.Predef.String" class="extype">String</span></span>, <span name="user">user: <span name="scala.Predef.String" class="extype">String</span></span>, <span name="date">date: <span name="scala.Predef.String" class="extype">String</span></span>, <span name="request">request: <span name="scala.Predef.String" class="extype">String</span></span>, <span name="status">status: <span name="scala.Predef.String" class="extype">String</span></span>, <span name="size">size: <span name="scala.Int" class="extype">Int</span></span>)</span><span class="result"> extends <span name="scala.Product" class="extype">Product</span> with <span name="scala.Serializable" class="extype">Serializable</span></span></span><p class="shortcomment cmt">LogEntry object.</p><div class="fullcomment"><div class="comment cmt"><p>LogEntry object.  Case class encapsulation for common log format, CLF, entry</p><pre>CLF - host,ignore,user,date,request,status,size</pre></div></div></li><li class="indented0 " name="org.nj.clfmon.LogWindowedHost" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="LogWindowedHostextendsProductwithSerializable"></a><a id="LogWindowedHost:LogWindowedHost"></a> <span class="permalink"><a href="../../../org/nj/clfmon/LogWindowedHost.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">case class</span></span> <span class="symbol"><a href="LogWindowedHost.html" title="LogWindowedHost object."><span class="name">LogWindowedHost</span></a><span class="params">(<span name="time">time: <span name="scala.Long" class="extype">Long</span></span>, <span name="host">host: <span name="scala.Predef.String" class="extype">String</span></span>, <span name="numReq">numReq: <span name="scala.Int" class="extype">Int</span></span>)</span><span class="result"> extends <span name="scala.Product" class="extype">Product</span> with <span name="scala.Serializable" class="extype">Serializable</span></span></span><p class="shortcomment cmt">LogWindowedHost object.</p><div class="fullcomment"><div class="comment cmt"><p>LogWindowedHost object.  Case class encapsulation for aggregated req per host over time window
 LogWindowedHost: time, host, number of requests &lt;= aggregated requests per host within window
</p></div></div></li><li class="indented0 " name="org.nj.clfmon.LogWindowedReq" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="LogWindowedReqextendsProductwithSerializable"></a><a id="LogWindowedReq:LogWindowedReq"></a> <span class="permalink"><a href="../../../org/nj/clfmon/LogWindowedReq.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">case class</span></span> <span class="symbol"><a href="LogWindowedReq.html" title="LogWindowedReq object."><span class="name">LogWindowedReq</span></a><span class="params">(<span name="time">time: <span name="scala.Long" class="extype">Long</span></span>, <span name="numReq">numReq: <span name="scala.Int" class="extype">Int</span></span>)</span><span class="result"> extends <span name="scala.Product" class="extype">Product</span> with <span name="scala.Serializable" class="extype">Serializable</span></span></span><p class="shortcomment cmt">LogWindowedReq object.</p><div class="fullcomment"><div class="comment cmt"><p>LogWindowedReq object.  Case class encapsulation for aggregated total req over time window
 LogWindowedReq: time, number of requests &lt;= aggregated total requests within window
</p></div></div></li><li class="indented0 " name="org.nj.clfmon.LogWindowedReqAlrm" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="LogWindowedReqAlrmextendsProductwithSerializable"></a><a id="LogWindowedReqAlrm:LogWindowedReqAlrm"></a> <span class="permalink"><a href="../../../org/nj/clfmon/LogWindowedReqAlrm.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">case class</span></span> <span class="symbol"><a href="LogWindowedReqAlrm.html" title="LogWindowedReqAlrm object."><span class="name">LogWindowedReqAlrm</span></a><span class="params">(<span name="time">time: <span name="scala.Long" class="extype">Long</span></span>, <span name="numReq">numReq: <span name="scala.Int" class="extype">Int</span></span>, <span name="alrm">alrm: <span name="scala.Predef.String" class="extype">String</span> = <span class="symbol">"Normal"</span></span>)</span><span class="result"> extends <span name="scala.Product" class="extype">Product</span> with <span name="scala.Serializable" class="extype">Serializable</span></span></span><p class="shortcomment cmt">LogWindowedReqAlrm object.</p><div class="fullcomment"><div class="comment cmt"><p>LogWindowedReqAlrm object.  Case class encapsulation for aggregated total req over time window with alarm.
 LogWindowedReqAlrm: time, number of requests, alarm &lt;= aggregated total requests within window marked with alarm if number of requests over threshold
</p></div></div></li></ol></div><div class="values members"><h3>Value Members</h3><ol><li class="indented0 " name="org.nj.clfmon.CLF" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="CLF"></a><a id="CLF:CLF"></a> <span class="permalink"><a href="../../../org/nj/clfmon/CLF$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="CLF$.html" title="Common log format object."><span class="name">CLF</span></a></span><p class="shortcomment cmt">Common log format object.</p><div class="fullcomment"><div class="comment cmt"><p>Common log format object.</p><pre> csv header: host,ignore,user,date,request,status,size
  <span class="num">199.72</span>.<span class="num">81.55</span> - - [<span class="num">01</span>/Jul/<span class="num">1995</span>:<span class="num">00</span>:<span class="num">00</span>:<span class="num">01</span> -<span class="num">0400</span>] <span class="lit">"GET /history/apollo/ HTTP/1.0"</span> <span class="num">200</span> <span class="num">6245</span>

<span class="kw">import</span> org.nj.clfmon.CLF
 streaming <span class="kw">with</span> bytestream x <span class="kw">=&gt;</span>
.map((x) = &gt; {
 cur = CLF.getLogEntry(x)
})

  converts bytestream from csv log file stream to a LogEntry <span class="kw">case</span> <span class="kw">class</span>

 see Flows.delimited2Clf <span class="kw">for</span> example stream function transforming bytestream to LogEntry</pre></div></div></li><li class="indented0 " name="org.nj.clfmon.FileClf" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="FileClf"></a><a id="FileClf:FileClf"></a> <span class="permalink"><a href="../../../org/nj/clfmon/FileClf$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="FileClf$.html" title="A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:"><span class="name">FileClf</span></a></span><p class="shortcomment cmt">A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:</p><div class="fullcomment"><div class="comment cmt"><p>A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:</p><p>streams data from Source FileIO network log file &lt;app.log in application.conf&gt;;</p><p>stream is processed through stream processor transformation functions, aggregations and output to Elasticsearch indexes;</p><p> Source FileIO csv file is streamed through two parallel stream processor flows to 2 separate ElasticSearch Sink indexes -</p><p> i.) essink - number of aggregated requests per host per &lt;window_interval_time&gt; minutes</p><p> ii.) essink1 - count of total number of requests per &lt;window_interval_time&gt; minutes</p><pre><span class="kw">import</span> org.nj.clfmon
 <span class="kw">val</span> clf = <span class="kw">new</span> FileClf


 Source ---&gt;| Delimited <span class="lit">'\n'</span> |---&gt;|  CLF network request entry |--&gt;| Windowed| --&gt; JUNCTION SPLITTER

                 |----&gt;| Aggregate num req by host |---&gt;| essink Sink
--&gt; J SPLITTER --|
                 |----&gt;| count total num req |--&gt;| essink1 Sink

 In <span class="kw">this</span> <span class="kw">object</span> uses akka Flows <span class="kw">for</span> filters, functions, aggregation and
 joining / merging:

 Filters:
   bs3deimited - Delimited byte stream by carridge <span class="kw">return</span> <span class="lit">'\n'</span>
 Functions:
   delimited2Clf - transform delimited stream to common log entry, CLF entry
   Clfw2Lwr - count number of network request, number of CLF entries, per interval
   Lwh2esIndex - transform data, requests per host, to elasticsearch index
   Lwr2esIndex - transform data, network requests, to elasticsearch index
 Aggregations:
   Clf2Clfw - windowed common log entries, CLF entries per interval
   Clfw2Lwh - aggregation by host, number of entries per host</pre></div></div></li><li class="indented0 " name="org.nj.clfmon.Flows" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="Flows"></a><a id="Flows:Flows"></a> <span class="permalink"><a href="../../../org/nj/clfmon/Flows$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="Flows$.html" title="A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:"><span class="name">Flows</span></a></span><p class="shortcomment cmt">A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:</p><div class="fullcomment"><div class="comment cmt"><p>A real time streaming reactive design to monitor Network traffic in Common Log File Format, CLF:</p><p>Flows object containing
stream Flow components for processing web server logs in common log format.
Each Flow component transforms the data stream through either filtering,
function specific transformation or aggregation.</p><pre>  <span class="kw">val</span> stream = FileIO.fomPath(file).via(Flows.bs2delimited).via(Flows.delimited2Clf).async.via(Flows.Clf2Clfw)
                 .stream.via(Flows.Clfw2Lwh).via(Flows.Lwh2esIndex)
                .via(ElasticsearchFlow
                .create[LogWindowedHost](<span class="lit">"essink"</span>,<span class="lit">"_doc"</span>,baseWriteSettings)
                 ).async
                .runWith(Sink.seq)


Components represent akka flows connected from Source to Sink forming
data pipeline.
 Source --&gt; Flow transformation --&gt; ... --&gt; Sink
 Filters:
   bs3deimited - Delimited byte stream by carridge <span class="kw">return</span> <span class="lit">'\n'</span>
 Functions:
   delimited2Clf - transform delimited stream to common log entry, CLF entry
   Clfw2Lwr - count number of network request, number of CLF entries, per interval
   Lwh2esIndex - transform data, requests per host, to elasticsearch index
   Lwr2esIndex - transform data, network requests, to elasticsearch index
 Aggregations:
   Clf2Clfw - windowed common log entries, CLF entries per interval
   Clfw2Lwh - aggregation by host, number of entries per host</pre></div></div></li><li class="indented0 " name="org.nj.clfmon.Main" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="Main"></a><a id="Main:Main"></a> <span class="permalink"><a href="../../../org/nj/clfmon/Main$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="Main$.html" title="Main driver of application."><span class="name">Main</span></a><span class="result"> extends <span name="scala.App" class="extype">App</span></span></span><p class="shortcomment cmt">Main driver of application.</p></li></ol></div></div><div id="inheritedMembers"></div><div id="groupedMembers"><div name="Ungrouped" class="group"><h3>Ungrouped</h3></div></div></div><div id="tooltip"></div><div id="footer"></div></body></div></div></div></body></html>
